<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include("../partials/head.ejs") %>

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/css/bootstrap.min.css"
      integrity="sha384-GLhlTQ8iK7t1TIpo7WDBWSuBeiS2RS5MjzmqJ/6+O6Em7SwC+3gZpzz5fePss+3"
      crossorigin="anonymous"
    />

    <title>admin panel</title>
  </head>

  <body>
    <div class="container-fluid">
      <!-- <pre><code>
            todo:
            - create subsite
            - create main panorama for subsite
            - create hotspot for panorama by click on panorama. hotspot may contain img, links, description
            - create tour panorama hotspot
        </code></pre> -->
    </div>

    <div class="container-fluid">
      <a href="/admin/tour" type="button" class="btn btn-primary"
        >Add new tour</a
      >

      <section>
        <h3>panorama list</h3>
        <ol class="list-group">
          <% if (tours) { %> <% tours.forEach(element => { %>
          <li class="list-group-item">
            <<<<<<< HEAD <%- JSON.stringify(element) %> Name:<%=element.name%>
            <br />
            <a href="/admin/tour-edit/<%=element.id%>">Edit:</a><br />
            <!-- File: <img src="<%=element.panorama_file%>" alt="" /> -->
            =======
            <strong>Name:</strong> <%=element.name%> <br />
            <strong>File:</strong>
            <img src="<%=element.panorama_file%>" alt="" class="img-fluid" />
            >>>>>>> origin/main
          </li>
          <% }) %> <% } %>
        </ol>
      </section>
    </div>

    <div>
      <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <a class="navbar-brand" href="#">Admin panel</a>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav">
            <li class="nav-item">
              <a class="nav-link" href="#dashboard">Dashboard</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#settings">Settings</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#logout">Logout</a>
            </li>
          </ul>
        </div>
      </nav>

      <div class="container">
        <section id="user-card">
          <h2>Yrityskortti</h2>
          <form class="needs-validation" novalidate>
            <div class="mb-3">
              <label for="name" class="form-label">Nimi:</label>
              <input
                type="text"
                class="form-control"
                id="name"
                name="name"
                required
                placeholder="Yrityksen Nimi"
              />
            </div>

            <div class="mb-3">
              <label for="email" class="form-label">S-posti:</label>
              <input
                type="email"
                class="form-control"
                id="email"
                name="email"
                required
                placeholder="Sähköpostiosoite"
              />
            </div>

            <div class="mb-3">
              <label for="phone" class="form-label">Puhelin:</label>
              <input
                type="tel"
                class="form-control"
                id="phone"
                name="phone"
                required
                placeholder="0451111111"
              />
            </div>

            <div class="mb-3">
              <label for="address" class="form-label">Osoite:</label>
              <input
                type="text"
                class="form-control"
                id="address"
                name="address"
                required
                placeholder="Kaislakatu 1"
              />
            </div>

            <div class="mb-3">
              <label for="url" class="form-label">Verkkosivu:</label>
              <input
                type="url"
                class="form-control"
                id="url"
                name="url"
                required
                placeholder="http://fjkdjf"
              />
            </div>

            <div class="mb-3">
              <label for="sotials" class="form-label">SoMe:</label>
              <input
                type="url"
                class="form-control"
                id="sotials"
                name="sotials"
                required
                placeholder="http://fjkdjf"
              />
            </div>

            <div class="mb-3">
              <label for="hotspot" class="form-label">Hotspot:</label>
              <input
                type="text"
                class="form-control"
                id="hotspot"
                name="hotspot"
                required
                placeholder="81"
              />
            </div>

            <div class="mb-3">
              <label for="coords" class="form-label">Coordinates:</label>
              <input
                type="text"
                class="form-control"
                id="coords"
                name="coords"
                required
                placeholder="pitch:347895275, yaw:58795788"
              />
            </div>

            <div class="mb-3">
              <label for="map" class="form-label">Google Maps:</label>
              <input
                type="url"
                class="form-control"
                id="map"
                name="map"
                placeholder="Google Maps Link"
              />
            </div>

            <div class="mb-3">
              <label for="description" class="form-label">Info:</label>
              <input
                type="text"
                class="form-control"
                id="description"
                name="description"
                required
                placeholder="lorem ipsum"
              />
            </div>

            <div class="mb-3">
              <label for="panoramaFile" class="form-label custom-file-upload">
                <input
                  type="file"
                  class="form-control"
                  id="panoramaFile"
                  name="panoramaFile"
                />
                Upload Panorama
              </label>
              <button type="submit" class="btn btn-primary">Tallenna</button>
            </div>
          </form>
        </section>
      </div>
    </div>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        var form = document.querySelector("form");

        form.addEventListener("submit", function (event) {
          event.preventDefault();

          // Get form data
          var formData = new FormData(form);

          // You can use AJAX to send the form data to your server
          // For simplicity, this example just logs the form data
          for (var pair of formData.entries()) {
            console.log(pair[0] + ": " + pair[1]);
          }

          // Add logic to handle the panorama file separately and upload it to the server
          var panoramaFile = formData.get("panoramaFile");
          if (panoramaFile) {
            // Handle the panorama file, upload it, and store the necessary information
            console.log("Panorama File:", panoramaFile.name);
            // Add logic to upload and store the panorama file on your server
          }
        });
      });
    </script>

    <script>
      // Google Maps Initialization
      function initMap() {
        var map = new google.maps.Map(document.getElementById("map"), {
          center: { lat: 37.7749, lng: -122.4194 }, // Default to San Francisco
          zoom: 12,
        });

        // Add a marker for a specific location
        var marker = new google.maps.Marker({
          position: { lat: 37.7749, lng: -122.4194 }, // Change to the specific location coordinates
          map: map,
          title: "Your Place Name", // Replace with the actual place name
        });

        // Set the link to Google Maps
        var googleMapsLink = document.getElementById("googleMapsLink");
        googleMapsLink.href =
          "https://www.google.com/maps?q=" +
          marker.getPosition().lat() +
          "," +
          marker.getPosition().lng();

        // You can customize the map and marker further based on your needs
      }
    </script>

    <%- include("../partials/footer.ejs") %>
  </body>
</html>
